{% extends 'base.html' %}
{% block content %}

<h2>🏢 Cadastro de Empresa</h2>
<form method="post" novalidate>
    {% csrf_token %}

    <label><strong>Nome da Empresa:</strong></label><br>
    <input type="text" name="nome" required class="form-control mb-3" placeholder="Nome da empresa"><br>

    <label><strong>CNPJ:</strong></label><br>
    <input type="text" name="cnpj" required class="form-control mb-3" placeholder="Somente números, 14 dígitos" pattern="\d{14}" title="Informe 14 dígitos numéricos, sem pontos ou traços"><br>

    <h4>Setores e Funcionários</h4>
    <div id="setores">
        <div class="setor mb-3">
            <input type="text" name="setores[]" placeholder="Nome do Setor" required class="form-control d-inline-block w-75 me-2" style="max-width: 400px;">
            <input type="number" name="funcionarios[]" placeholder="Nº de Funcionários" min="1" required class="form-control d-inline-block w-25" style="max-width: 150px;">
        </div>
    </div>

    <button type="button" onclick="addSetor()" class="btn btn-outline-primary mb-4">➕ Adicionar Setor</button><br>

    <button type="submit" class="btn btn-success">💾 Cadastrar Empresa</button>
</form>

<script>
function addSetor() {
    const div = document.createElement("div");
    div.classList.add("setor", "mb-3");
    div.innerHTML = `
        <input type="text" name="setores[]" placeholder="Nome do Setor" required class="form-control d-inline-block w-75 me-2" style="max-width: 400px;">
        <input type="number" name="funcionarios[]" placeholder="Nº de Funcionários" min="1" required class="form-control d-inline-block w-25" style="max-width: 150px;">
    `;
    document.getElementById("setores").appendChild(div);
}
</script>

{% endblock %}
